/*! tink-sort-table-angular v1.1.9 */
"use strict";!function(module){try{module=angular.module("tink.sorttable")}catch(e){module=angular.module("tink.sorttable",["ngLodash"])}module.controller("TinkSortTableController",["lodash","$scope",function(_,scope){function sortData(order,prop,data,type){dataModel=dataModel.sort(type&&"date"===type.toLowerCase()?function(a,b){var obj1Val=a[prop],obj2Val=b[prop];return order*(obj1Val-obj2Val)}:function(obj1,obj2){var obj1Val=obj1[prop],obj2Val=obj2[prop];return _.isString(obj1Val)||(obj1Val=obj1Val.toString()),_.isString(obj2Val)||(obj2Val=obj2Val.toString()),order*obj1Val.localeCompare(obj2Val)})}var ctrl=this,dataModel=null,currentSort={prop:null,order:null},headers=[];ctrl.init=function(data){dataModel=data},ctrl.register=function(data){currentSort&&data&&currentSort.prop===data.prop&&data.fn(currentSort.order),headers[data.prop]={fn:data.fn}},ctrl.reSort=function(){currentSort&&null!==currentSort.prop&&ctrl.sortHeader(currentSort.prop,currentSort.type,currentSort.order)},ctrl.sortHeader=function(prop,type,order){if(dataModel){if(currentSort.prop===prop?1===currentSort.order?currentSort.order=-1:currentSort.order=1:(null!==currentSort.prop&&headers[currentSort.prop].fn(-99),currentSort.order=1,currentSort.prop=prop),order&&(currentSort.order=order),scope.tinkCallback){var stringOrder="asc";stringOrder=1===currentSort.order?"asc":"desc",scope.tinkCallback({$property:prop,$order:stringOrder,$type:type})}currentSort.type=type,scope.tinkSort!==!1&&"false"!==scope.tinkSort&&sortData(currentSort.order,prop,dataModel,type),headers[prop].fn(currentSort.order)}}}])}(),function(module){try{module=angular.module("tink.sorttable")}catch(e){module=angular.module("tink.sorttable",["ngLodash"])}module.directive("tinkSortHeader",[function(){return{require:"^tinkSortTable",restrict:"A",link:function(scope,elem,attr,ctrl){$(elem).addClass("is-sortable"),$(elem).addClass("is-sortable");var action=function(data){$(elem).removeClass("sort-asc").removeClass("sort-desc"),1===data?$(elem).addClass("sort-asc"):-1===data&&$(elem).addClass("sort-desc")};$(elem).bind("click",function(){scope.$apply(function(){ctrl.sortHeader(attr.tinkSortHeader,attr.tinkSortType)})}),ctrl.register({prop:attr.tinkSortHeader,fn:action})}}}])}(),function(module){try{module=angular.module("tink.sorttable")}catch(e){module=angular.module("tink.sorttable",["ngLodash"])}module.directive("tinkSortTable",[function(){return{restrict:"AE",controller:"TinkSortTableController",scope:{tinkSortTable:"=",tinkInitSort:"@",tinkSortType:"@",tinkInitSortOrder:"@",tinkCallback:"&",tinkSort:"="},link:function(scope,elem,attr,ctrl){return"TABLE"!==elem.get(0).tagName?void console.warn("sorter has to be set on table !"):($(elem).addClass("table-interactive"),void scope.$watch("tinkSortTable",function(){ctrl.init(scope.tinkSortTable);var order=1;scope.tinkInitSort?(scope.tinkInitSortOrder&&"desc"===scope.tinkInitSortOrder.toLowerCase()&&(order=-1),scope.tinkSort!==!1&&"false"!==scope.tinkSort&&ctrl.sortHeader(attr.tinkSortHeader,attr.tinkSortType)):scope.tinkSort!==!1&&"false"!==scope.tinkSort&&ctrl.reSort()}))}}}])}();
//# sourceMappingURL=tink-sort-table-angular.min.map